---
import type { GetStaticPaths } from "astro";
import ProductCard from '../../components/products/ProductCard.astro';
import type { PokemonListResponse } from '../../interfaces/pokemon-list.response';
import MainLayout from '../../layouts/MainLayaout.astro';

const jsonLd = {
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "Comercial Scanavini Ltda.",
  "url": "https://www.scanavini.com",
  "logo": "https://www.scanavini.com/iso_scanavini.svg",
  "sameAs": [
    "https://www.facebook.com/scanaviniCL/", 
    "https://www.instagram.com/scanavini_cerraduras/",
		"https://www.linkedin.com/company/comercial-scanavini-limitada/about/",
		"https://www.youtube.com/@ScanaviniCerraduras"
  ]
};


export const getStaticPaths = ( async ( { paginate } ) => {
  // Consumo de API
  const resp = await fetch('https://pokeapi.co/api/v2/pokemon?limit=151');
  const {results} = (await resp.json()) as PokemonListResponse;


  return paginate(results, { pageSize:20 });
}) satisfies GetStaticPaths;

const { page } = Astro.props;

---

<MainLayout
  title="Title"
  description="Description"
	image='/iso_scanavini.svg'
	robots="index,follow"
	jsonLd={ jsonLd }
>
  <h1 class="text-blue-500 text-3xl" >Lista de Pokemones</h1>
  <hr/>

  <section class="grid grid-cols-1 sm:grid-cols-4 md:grid-cols-5 gap-4 mt-5" >
    {
      page.data.map( pokemon =>  (
      
        <ProductCard 
          name={ pokemon.name }
          url={ pokemon.url } 
        />
      
    ))
    }
  </section>

  <section class="flex  mt-10 gap-2 items-center" >
    <a 
      href={ page.url.prev }
      class:list={[
        "btn",
        { disabled: !page.url.prev  }
      ]}
    >
      Anterior
    </a>

    <a 
      href={ page.url.next }
      class:list={[
        "btn",
        { disabled: !page.url.next  }
      ]}
    >
      Posterior
    </a>

    <div class="flex flex-1"></div>

    <span>PÃ¡gina { page.currentPage }</span>
  </section>

</MainLayout>
<style>
  .btn{
    background-color: blue;
    padding: 10px;
    color: white;
  }

  .disabled{
    color: rgb(159, 159, 159);
    background-color: rgb(84, 84, 84);
  }
</style>
